{% extends 'base/base.html' %}
{% block title %}
Amigos
{% endblock %}
{% block content %}

<h3 style="padding: 0 20px 0">Lista de amigos</h3>

<div align="left" style="padding: 0 20px 0">
    {% if isFriends %}
        <input type="button"  class="btn pulsado" style="border-color:#2c539e"
                               onclick="location.href='/actors/friends';"
                               value="Amigos"/>&nbsp
        <input type="button"  class="btn editbutton"
                               onclick="location.href='/actors/users';"
                               value="Buscar usuarios"/>&nbsp

    {% elif isAllUsers %}
        <input type="button"  class="btn editbutton"
                               onclick="location.href='/actors/friends';"
                               value="Amigos"/>&nbsp
        <input type="button"  class="btn pulsado" style="border-color:#2c539e"
                               onclick="location.href='/actors/users';"
                               value="Buscar usuarios"/>&nbsp

    {% endif %}
</div>
</br>
        <!-- Listado -->
        {% if friend_list %}

            {% for friend in friend_list %}
                <div align="center" style="overflow: auto;padding: 0 20px 0;">
                    <!-- Recibe lista de solicitudes, coge el follower si no es el actor logueado -->
                            {% if friend.follower != actor %}
                                <!-- FOTO DEL ACTOR SEGUIDOR -->
                                <div style="float: left;">
                                    {% if friend.follower.photo %}
                                        <img src="{{ friend.follower.photo.url }}"  alt="friend's dog" width="200px" height="200px">
                                    {% endif %}
                                </div>
                                <!-- SI EL ACTOR SEGUIDOR ES ASOCIACION MUESTRA SUS DATOS -->
                                {% if friend.follower.association %}
                                <div style="float: left;width:400px;padding:0px 20px 0px">
                                    <p class="card-text" align="left" style="font-size:24px;"><b> {{ friend.follower.userAccount.first_name }}  {{ friend.follower.userAccount.last_name }}</b></p>
                                    <p class="card-text" align="left"><b>Centro: </b>{{ friend.follower.association.centerName }}</p>
                                    <p class="card-text" align="left"><b>Horario: </b>De {{ friend.follower.association.opening|time:'H' }}:{{ friend.follower.association.opening|time:'i' }}  a {{ friend.follower.association.closing|time:'H' }}:{{ friend.follower.association.closing|time:'i' }}</p>
                                    {% if friend.follower.association.notes %}
                                        <p class="card-text" align="left"><i>{{ friend.follower.association.notes }}</i></p>
                                    {% endif %}
                                    <p class="card-text" align="left"><b>Dirección: </b>{{ friend.follower.association.address }}</p>
                                </div>
                                <div style="float: left;width:400px;padding:0px 20px 0px">
                                    <p class="card-text" align="left"><b>Contacto: </b>{{ friend.follower.association.userAccount.email }}</p>
                                    <p class="card-text" align="left"><b>Teléfono: </b>{{ friend.follower.association.phone }}</p>
                                    <p class="card-text" align="left"><b> {{ friend.follower.association.province }} - C.P. {{ friend.follower.association.postalCode }}</b></p>
                                     <div align="left">
                                        <button class="btn btn-success" onclick="location.href='/messages/send/{{ friend.follower.pk }}';">
                                            <span class="fa fa-envelope">
                                            </span>
                                        </button>

                                        <a class="btn btn-danger" href="{% url 'delete_friend' friend.follower.pk %}">
                                            <i class="fa fa-trash"></i>
                                        </a>
                                    </div>
                                </div>
                                <!-- SI EL ACTOR SEGUIDOR ES CRIADOR MUESTRA SUS DATOS -->
                                {% elif friend.follower.breeder %}
                                <div style="float: left;width:400px;padding:0px 20px 0px">
                                    <p class="card-text" align="left" style="font-size:24px;"><b> {{ friend.follower.userAccount.first_name }}  {{ friend.follower.userAccount.last_name }}</b></p>
                                    <p class="card-text" align="left"><b>Centro: </b>{{ friend.follower.breeder.centerName }}</p>
                                    <p class="card-text" align="left"><b>Horario: </b>De {{ friend.follower.breeder.opening|time:'H' }}:{{ friend.follower.breeder.opening|time:'i' }}  a {{ friend.follower.breeder.closing|time:'H' }}:{{ friend.follower.breeder.closing|time:'i' }}</p>
                                    {% if friend.follower.breeder.notes %}
                                        <p class="card-text" align="left"><i>{{ friend.follower.breeder.notes }}</i></p>
                                    {% endif %}
                                    <p class="card-text" align="left"><b>Dirección: </b>{{ friend.follower.breeder.address }}</p>
                                </div>
                                <div style="float: left;width:400px;padding:0px 20px 0px">
                                    <p class="card-text" align="left"><b>Contacto: </b>{{ friend.follower.breeder.userAccount.email }}</p>
                                    <p class="card-text" align="left"><b>Teléfono: </b>{{ friend.follower.breeder.phone }}</p>
                                    <p class="card-text" align="left"><b> {{ friend.follower.breeder.province }} - C.P. {{ friend.follower.breeder.postalCode }}</b></p>
                                    <div align="left">
                                        <button class="btn btn-success" onclick="location.href='/messages/send/{{ friend.follower.pk }}';">
                                            <span class="fa fa-envelope">
                                            </span>
                                        </button>

                                        <a class="btn btn-danger" href="{% url 'delete_friend' friend.follower.pk %}">
                                            <i class="fa fa-trash"></i>
                                        </a>
                                    </div>
                                </div>
                                 <!-- SI EL ACTOR SEGUIDOR ES USUARIO MUESTRA SUS DATOS-->
                                {% else %}
                                    <div style="float: left;width:400px;padding:0px 20px 0px">
                                        <p class="card-text" align="left" style="font-size:24px;"><b> {{ friend.follower.userAccount.first_name }}  {{ friend.follower.userAccount.last_name }}</b></p>
                                        <p class="card-text" align="left"><b>Contacto: </b>{{ friend.follower.customer.userAccount.email }}</p>
                                        <p class="card-text" align="left"><b>Teléfono: </b>{{ friend.follower.customer.phone }}</p>

                                    </div>
                                    <div style="float: left;width:400px;padding:0px 20px 0px">
                                        <div align="left">
                                            <button class="btn btn-success" onclick="location.href='/messages/send/{{ friend.follower.pk }}';">
                                                <span class="fa fa-envelope">
                                                </span>
                                            </button>

                                            <a class="btn btn-danger" href="{% url 'delete_friend' friend.follower.pk %}">
                                                <i class="fa fa-trash"></i>
                                            </a>
                                        </div>
                                    </div>
                                {% endif %}

                             <!-- Recibe lista de solicitudes, coge  followed si no es el actor logueado -->
                            {% elif friend.followed != actor %}
                                 <!-- MUESTRA LA IMAGEN DEL ACTOR SEGUIDO-->
                                <div style="float: left;">
                                    {% if friend.followed.photo %}
                                        <img src="{{ friend.followed.photo.url }}"  alt="friend's dog" width="200px" height="200px">
                                    {% endif %}
                                </div>

                                <!-- SI EL ACTOR SEGUIDO ES ASOCIACION MUESTRA SUS DATOS -->
                                {% if friend.followed.association %}
                                <div style="float: left;width:400px;padding:0px 20px 0px">

                                    <p class="card-text" align="left" style="font-size:24px;"><b> {{ friend.followed.userAccount.first_name }}  {{ friend.followed.userAccount.last_name }}</b></p>
                                    <p class="card-text" align="left"><b>Centro: </b>{{ friend.followed.association.centerName }}</p>
                                    <p class="card-text" align="left"><b>Horario: </b>De {{ friend.followed.association.opening|time:'H' }}:{{ friend.followed.association.opening|time:'i' }}  a {{ friend.followed.association.closing|time:'H' }}:{{ friend.followed.association.closing|time:'i' }}</p>
                                    {% if friend.followed.association.notes %}
                                        <p class="card-text" align="left"><i>{{ friend.followed.association.notes }}</i></p>
                                    {% endif %}
                                    <p class="card-text" align="left"><b>Dirección: </b>{{ friend.followed.association.address }}</p>
                                </div>
                                <div style="float: left;width:400px;padding:0px 20px 0px">
                                    <p class="card-text" align="left"><b>Contacto: </b>{{ friend.followed.association.userAccount.email }}</p>
                                    <p class="card-text" align="left"><b>Teléfono: </b>{{ friend.followed.association.phone }}</p>
                                    <p class="card-text" align="left"><b> {{ friend.followed.association.province }} - C.P. {{ friend.followed.association.postalCode }}</b></p>
                                    <div align="left">
                                        <button class="btn btn-success" onclick="location.href='/messages/send/{{ friend.followed.pk }}';">
                                            <span class="fa fa-envelope">
                                            </span>
                                        </button>

                                        <a class="btn btn-danger" href="{% url 'delete_friend' friend.followed.pk %}">
                                            <i class="fa fa-trash"></i>
                                        </a>
                                    </div>
                                </div>
                                <!-- SI EL ACTOR SEGUIDO ES CRIADOR MUESTRA SUS DATOS -->
                                {% elif friend.followed.breeder %}
                                <div style="float: left;width:400px;padding:0px 20px 0px">
                                    <p class="card-text" align="left" style="font-size:24px;"><b> {{ friend.followed.userAccount.first_name }}  {{ friend.followed.userAccount.last_name }}</b></p>
                                    <p class="card-text" align="left"><b>Centro: </b>{{ friend.followed.breeder.centerName }}</p>
                                    <p class="card-text" align="left"><b>Horario: </b>De {{ friend.followed.breeder.opening|time:'H' }}:{{ friend.followed.breeder.opening|time:'i' }}  a {{ friend.followed.breeder.closing|time:'H' }}:{{ friend.followed.breeder.closing|time:'i' }}</p>
                                    {% if friend.followed.breeder.notes %}
                                        <p class="card-text" align="left"><i>{{ friend.followed.breeder.notes }}</i></p>
                                    {% endif %}
                                    <p class="card-text" align="left"><b>Dirección: </b>{{ friend.followed.breeder.address }}</p>
                                </div>
                                <div style="float: left;width:400px;padding:0px 20px 0px">
                                    <p class="card-text" align="left"><b>Contacto: </b>{{ friend.followed.breeder.userAccount.email }}</p>
                                    <p class="card-text" align="left"><b>Teléfono: </b>{{ friend.followed.breeder.phone }}</p>
                                    <p class="card-text" align="left"><b> {{ friend.followed.breeder.province }} - C.P. {{ friend.followed.breeder.postalCode }}</b></p>
                                    <div align="left">
                                        <button class="btn btn-success" onclick="location.href='/messages/send/{{ friend.followed.pk }}';">
                                            <span class="fa fa-envelope">
                                            </span>
                                        </button>

                                        <a class="btn btn-danger" href="{% url 'delete_friend' friend.followed.pk %}">
                                            <i class="fa fa-trash"></i>
                                        </a>
                                    </div>
                                </div>
                                 <!-- SI EL ACTOR SEGUIDO ES USUARIO MUESTRA SUS DATOS-->
                                {% else %}
                                    <div style="float: left;width:400px;padding:0px 20px 0px">
                                        <p class="card-text" align="left" style="font-size:24px;"><b> {{ friend.followed.userAccount.first_name }}  {{ friend.followed.userAccount.last_name }}</b></p>
                                        <p class="card-text" align="left"><b>Contacto: </b>{{ friend.followed.customer.userAccount.email }}</p>
                                        <p class="card-text" align="left"><b>Teléfono: </b>{{ friend.followed.customer.phone }}</p>

                                    </div>
                                <div style="float: left;width:400px;padding:0px 20px 0px">
                                        <div align="left">
                                            <button class="btn btn-success" onclick="location.href='/messages/send/{{ friend.followed.pk }}';">
                                                <span class="fa fa-envelope">
                                                </span>
                                            </button>

                                            <a class="btn btn-danger" href="{% url 'delete_friend' friend.followed.pk %}">
                                                <i class="fa fa-trash"></i>
                                            </a>
                                        </div>
                                </div>
                                {% endif %}

                            {% endif %}
                </div>
                <hr>
                {% endfor %}

          <!-- PAGINACION -->
        {% if friend_list.has_other_pages %}
            <div class="table-footer">
                <div  align="center" class="pagination" style="padding:0 20px 0">
                    <ul>
                        {% if friend_list.has_previous %}
                        <li class="previous"><a href="?page={{ friend_list.previous_page_number }}" class="fa fa-arrow-left"></a></li>
                        {% else %}
                        <li class="previous disabled"><a href="#" class="fa fa-arrow-left"></a></li>
                        {% endif %}
                        {% for i in friend_list.paginator.page_range %}
                            {% if friend_list.number == i %}
                            <li class="active"><a href="#">{{ i }}</a></li>
                            {% else %}
                            <li><a href="?page={{ i }}">{{ i }}</a></li>
                            {% endif %}
                        {% endfor %}
                        {% if friend_list.has_next %}
                        <li class="next"><a href="?page={{ friend_list.next_page_number }}" class="fa fa-arrow-right"></a></li>
                        {% else %}
                        <li class="previous disabled"><a href="#" class="fa fa-arrow-right"></a></li>
                        {% endif %}
                    </ul>
                </div>
            </div>
        {% endif %}

        {% else %}
            <p style="padding: 0 20px 0">Aún tienes amigos.</p>
        {% endif %}

{% endblock %}
