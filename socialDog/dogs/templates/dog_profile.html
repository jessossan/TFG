{% extends 'base/base.html' %}
{% block title %}
Perfil
{% endblock %}
{% block content %}


<div>
    </br>
    	 <div align="center" style="overflow: auto;padding: 0 20px 0;">
                            <!-- IMAGEN DEL PERRO -->
                            <div style="float: left;">
                                {% if dog.photo %}
                                    <img src="{{ dog.photo.url }}"  alt="photo's dog" width="400px" height="300px">
                                {% endif %}

                            </div>
                            <!-- DATOS RELEVANTES DEL PERRO -->
                            <div style="float: left;width:400px;padding:40px">
                                <p class="card-text" align="left"> <b>Nombre: </b>{{ dog.name }}</p>
                                <!-- COMPRUEBA LA S DE AÑO -->
                                {% if dog.age == 1 %}
                                    <p class="card-text" align="left"><b>Edad: </b>{{ dog.age }} año</p>
                                {% else %}
                                    <p class="card-text" align="left"><b>Edad: </b>{{ dog.age }} años</p>
                                {% endif %}
                                    <p class="card-text" align="left"><b>Género: </b>{{ dog.gender }}</p>
                                    <p class="card-text" align="left"><b>Raza: </b>{{ dog.breed }}</p>

                                <!-- SI TIENE PERFIL PRIVADO NO SE MUESTRA BOTON -->
                                {% if not user.is_authenticated and dog.breeder.private %}
                                    <p class="card-text" align="left"><b>Criador: </b>{{ dog.breeder.userAccount.first_name }}  {{ dog.breeder.userAccount.last_name }}</p>

                                {% elif user.is_authenticated %}
                                     <div align="left">
                                        <button class="btn btn-info" onclick="location.href='/actors/profile/{{ dog.breeder.pk }}';">
                                            <span class="fa fa-user"></span>
                                            {{ dog.breeder.userAccount.first_name }}  {{ dog.breeder.userAccount.last_name }}
                                        </button>
                                         <p></p>
                                     </div>
                                {% else %}
                                    <div align="left">
                                        <button class="btn btn-info" onclick="location.href='/web/profile/{{ dog.breeder.pk }}';">
                                            <span class="fa fa-user"></span>
                                            {{ dog.breeder.userAccount.first_name }}  {{ dog.breeder.userAccount.last_name }}
                                        </button>
                                    </div>
                                {% endif %}
                            </div>
                            <!-- CAMPOS DE TEXTO DEL PERRO -->
                                <div style="float: left;width:400px;padding:40px">
                                    {% if dog.details %}
                                    <p class="card-text" align="left"> <b>Detalles: </b>{{ dog.details }}</p>
                                    {% else %}
                                    <p class="card-text" align="left"> <b>Detalles: </b>ninguno</p>
                                    {% endif %}
                                    {% if dog.awards %}
                                    <p class="card-text" align="left"><b>Premios: </b>{{ dog.awards }}</p>
                                    {% else %}
                                    <p class="card-text" align="left"> <b>Premios: </b>ninguno</p>
                                    {% endif %}
                                    <p>&nbsp</p>
                                    <p class="card-text" align="left">
                                              {% if average == 0 %}
                                                    <a href="{% url 'list_dog_rates' dog.pk %}" style="color:inherit;text-decoration: none;">
                                                        <span class="fa fa-star" style="font-size:40px;"></span>
                                                        <span class="fa fa-star" style="font-size:40px;"></span>
                                                        <span class="fa fa-star" style="font-size:40px;"></span>
                                                        <span class="fa fa-star" style="font-size:40px;"></span>
                                                        <span class="fa fa-star" style="font-size:40px;"></span>
                                                    </a>
                                              {% elif average == 0.5 %}
                                                    <a href="{% url 'list_dog_rates' dog.pk %}" style="color:inherit;text-decoration: none;">
                                                        <span class="fa fa-star-half-o" style="color: orange;font-size:40px;"></span>
                                                        <span class="fa fa-star" style="font-size:40px;"></span>
                                                        <span class="fa fa-star" style="font-size:40px;"></span>
                                                        <span class="fa fa-star" style="font-size:40px;"></span>
                                                        <span class="fa fa-star" style="font-size:40px;"></span>
                                                    </a>
                                              {% elif average == 1 %}
                                                    <a href="{% url 'list_dog_rates' dog.pk %}" style="color:inherit;text-decoration: none;">
                                                        <span class="fa fa-star" style="color: orange;font-size:40px;"></span>
                                                        <span class="fa fa-star" style="font-size:40px;"></span>
                                                        <span class="fa fa-star" style="font-size:40px;"></span>
                                                        <span class="fa fa-star" style="font-size:40px;"></span>
                                                        <span class="fa fa-star" style="font-size:40px;"></span>
                                                    </a>
                                              {% elif average == 1.5 %}
                                                    <a href="{% url 'list_dog_rates' dog.pk %}" style="color:inherit;text-decoration: none;">
                                                        <span class="fa fa-star" style="color: orange;font-size:40px;"></span>
                                                        <span class="fa fa-star-half-o" style="color: orange;font-size:40px;"></span>
                                                        <span class="fa fa-star" style="font-size:40px;"></span>
                                                        <span class="fa fa-star" style="font-size:40px;"></span>
                                                        <span class="fa fa-star" style="font-size:40px;"></span>
                                                    </a>
                                              {% elif average == 2 %}
                                                    <a href="{% url 'list_dog_rates' dog.pk %}" style="color:inherit;text-decoration: none;">
                                                        <span class="fa fa-star" style="color: orange;font-size:40px;"></span>
                                                        <span class="fa fa-star" style="color: orange;font-size:40px;"></span>
                                                        <span class="fa fa-star" style="font-size:40px;"></span>
                                                        <span class="fa fa-star" style="font-size:40px;"></span>
                                                        <span class="fa fa-star" style="font-size:40px;"></span>
                                                    </a>
                                             {% elif average == 2.5 %}
                                                    <a href="{% url 'list_dog_rates' dog.pk %}" style="color:inherit;text-decoration: none;">
                                                        <span class="fa fa-star" style="color: orange;font-size:40px;"></span>
                                                        <span class="fa fa-star" style="color: orange;font-size:40px;"></span>
                                                        <span class="fa fa-star-half-o" style="color: orange;font-size:40px;"></span>
                                                        <span class="fa fa-star" style="font-size:40px;"></span>
                                                        <span class="fa fa-star" style="font-size:40px;"></span>
                                                    </a>
                                             {% elif average == 3 %}
                                                    <a href="{% url 'list_dog_rates' dog.pk %}" style="color:inherit;text-decoration: none;">
                                                        <span class="fa fa-star" style="color: orange;font-size:40px;"></span>
                                                        <span class="fa fa-star" style="color: orange;font-size:40px;"></span>
                                                        <span class="fa fa-star" style="color: orange;font-size:40px;"></span>
                                                        <span class="fa fa-star" style="font-size:40px;"></span>
                                                        <span class="fa fa-star" style="font-size:40px;"></span>
                                                    </a>
                                             {% elif average == 3.5 %}
                                                    <a href="{% url 'list_dog_rates' dog.pk %}" style="color:inherit;text-decoration: none;">
                                                        <span class="fa fa-star" style="color: orange;font-size:40px;"></span>
                                                        <span class="fa fa-star" style="color: orange;font-size:40px;"></span>
                                                        <span class="fa fa-star" style="color: orange;font-size:40px;"></span>
                                                        <span class="fa fa-star-half-o" style="color: orange;font-size:40px;"></span>
                                                        <span class="fa fa-star" style="font-size:40px;"></span>
                                                    </a>
                                             {% elif average == 4 %}
                                                    <a href="{% url 'list_dog_rates' dog.pk %}" style="color:inherit;text-decoration: none;">
                                                        <span class="fa fa-star" style="color: orange;font-size:40px;"></span>
                                                        <span class="fa fa-star" style="color: orange;"></span>
                                                        <span class="fa fa-star" style="color: orange;font-size:40px;"></span>
                                                        <span class="fa fa-star" style="color: orange;font-size:40px;"></span>
                                                        <span class="fa fa-star" style="font-size:40px;"></span>
                                                    </a>
                                             {% elif average == 4.5 %}
                                                    <a href="{% url 'list_dog_rates' dog.pk %}" style="color:inherit;text-decoration: none;">
                                                        <span class="fa fa-star" style="color: orange;font-size:40px;"></span>
                                                        <span class="fa fa-star" style="color: orange;font-size:40px;"></span>
                                                        <span class="fa fa-star" style="color: orange;font-size:40px;"></span>
                                                        <span class="fa fa-star" style="color: orange;font-size:40px;"></span>
                                                        <span class="fa fa-star-half-o" style="color: orange;font-size:40px;"></span>
                                                    </a>
                                             {% elif average == 5 %}
                                                    <a href="{% url 'list_dog_rates' dog.pk %}" style="color:inherit;text-decoration: none;">
                                                        <span class="fa fa-star" style="color: orange;font-size:40px;"></span>
                                                        <span class="fa fa-star" style="color: orange;font-size:40px;"></span>
                                                        <span class="fa fa-star" style="color: orange;font-size:40px;"></span>
                                                        <span class="fa fa-star" style="color: orange;font-size:40px;"></span>
                                                        <span class="fa fa-star" style="color: orange;font-size:40px;"></span>
                                                    </a>
                                             {% endif %}
                                    </p>
                                    {% if rateSize == 0 %}
                                        <p class="card-text" align="left">
                                            No tiene valoraciones
                                        </p>
                                    {% elif rateSize == 1 %}
                                        <p class="card-text" align="left">
                                            <a href="{% url 'list_dog_rates' dog.pk %}">{{ rateSize }} valoración </a>
                                        </p>
                                    {% else %}
                                        <p class="card-text" align="left">
                                            <a href="{% url 'list_dog_rates' dog.pk %}">{{ rateSize }} valoraciones </a>
                                        </p>
                                    {% endif %}

                                </div>

                            <!-- BOTONES SI ESTA LOGUEADO -->
                                <div style="float: left;width:30px;padding:40px 0 0">
                                    <!--BOTON PARA COMENTAR Y VALORAR-->
                                    {% if not ownDog %}
                                        <button class="btn btn-success " onclick="location.href='/comments/create/dog/{{ dog.pk }}';">
                                            <span class="fa fa-comment">
                                            </span>
                                        </button>
                                    <p></p>
                                        <button class="btn btn-success " onclick="location.href='/rates/create/dog/{{ dog.pk }}';">
                                            <span class="fa fa-star" >
                                            </span>
                                        </button>
                                    {% endif %}
                                </div>
                           </div>

</div>

<br/>
<div align="center">

{% if comment_list %}
    {% for comment in comment_list %}
         <div align="center" style="overflow: auto;padding: 0 20px 0;">

           <div class="card mb-4" style="max-width: 60rem;">
          <div class="card-header" align="center"><h4><b>{{ comment.title }}</b></h4></div>
          <div class="card-body text-dark">
            <p class="card-text">{{ comment.text }}</p>

              <p class="card-text" >
                <img src="{{ comment.creator_comment.photo.url }}" alt="Dog photo" width="75px" height="75px">
              <p></p>

                  {% if comment.creator_comment.breeder %}
                        <button class="btn btn-info"  onclick="location.href='/actors/profile/{{  comment.creator_comment.breeder.pk }}';">
                            <span class="fa fa-user"></span>
                            {{ comment.creator_comment.breeder.userAccount.first_name }} {{ comment.creator_comment.breeder.userAccount.last_name }}
                        </button>
                  {% elif comment.creator_comment.association %}
                      <button class="btn btn-info"  onclick="location.href='/actors/profile/{{ comment.creator_comment.association.pk }}';">
                            <span class="fa fa-user"></span>
                            {{ comment.creator_comment.association.userAccount.first_name }} {{ comment.creator_comment.association.userAccount.last_name }}
                        </button>
                  {% else %}
                            {{ comment.creator_comment.userAccount.first_name }} {{ comment.creator_comment.userAccount.last_name }}
                  {% endif %}

              </p>
          </div>
            <!-- Edición  y Borrado del comentario -->
            {% if comment.creator_comment == actor %}
                <div align="right" style="padding-right: 30px; padding-bottom: 10px;">
                    <!-- Número de likes y dislikes -->

                    <i class="fa fa-thumbs-o-up" style="font-size:30px"></i>
                    {{ comment.likes }}
                    &nbsp;&nbsp;

                    <i class="fa fa-thumbs-o-down" style="font-size:30px"></i>
                    {{ comment.dislikes }}
                    &nbsp;&nbsp;

                    <a href="{% url 'edit_comment' comment.pk %}" style="font-size:20px;" >Editar</a>
                    &nbsp;
                    <a  class="btn btn-danger" href="{% url 'delete_comment' comment.pk %}">Borrar</a>
                </div>
            {% else %}
                <div align="right" style="padding-right: 30px; padding-bottom: 10px;">
                    <!-- Like / Dislike -->
                    <!-- Si tiene like, muestra la mano verde y la otra oscura -->
                            {% if comment in commentWithLikes %}
                                <i class="fa fa-thumbs-up" style="font-size:30px;color:green"></i>
                                    {{ comment.likes }}
                                &nbsp;&nbsp;
                                <a href="{% url 'dislike_comment' comment.pk %}" style="color:inherit;text-decoration: none;">
                                    <i class="fa fa-thumbs-o-down" style="font-size:30px"></i>

                                </a>{{ comment.dislikes }}
                                &nbsp;&nbsp;
                            <!-- Si tiene dislike, muestra la mano roja y la otra oscura -->
                            {% elif comment in commentWithDislikes  %}
                                <a href="{% url 'like_comment' comment.pk %}" style="color:inherit;text-decoration: none;">
                                    <i class="fa fa-thumbs-o-up" style="font-size:30px"></i>

                                </a>{{ comment.likes }}
                                &nbsp;&nbsp;

                                <i class="fa fa-thumbs-down" style="font-size:30px;color:red"></i>
                                {{ comment.dislikes }}

                                &nbsp;&nbsp;
                            {% else %}
                                <a href="{% url 'like_comment' comment.pk %}" style="color:inherit;text-decoration: none;">
                                    <i class="fa fa-thumbs-o-up" style="font-size:30px"></i>

                                </a>{{ comment.likes }}
                                &nbsp;&nbsp;
                                <a href="{% url 'dislike_comment' comment.pk %}" style="color:inherit;text-decoration: none;">
                                    <i class="fa fa-thumbs-o-down" style="font-size:30px"></i>

                                </a>{{ comment.dislikes }}
                                &nbsp;&nbsp;
                            {% endif %}
                </div>

            {% endif %}
        </div>

        </div>
    {% endfor %}

    <!-- PAGINACION -->
    {% if comment_list.has_other_pages %}
          <div class="table-footer">
                <div  align="center" class="pagination" style="padding:0 20px 0">
                    <ul>
                        {% if comment_list.has_previous %}
                        <li class="previous"><a href="?page={{ comment_list.previous_page_number }}" class="fa fa-arrow-left"></a></li>
                        {% else %}
                        <li class="previous disabled"><a href="#" class="fa fa-arrow-left"></a></li>
                        {% endif %}
                        {% for i in comment_list.paginator.page_range %}
                            {% if comment_list.number == i %}
                            <li class="active"><a href="#">{{ i }}</a></li>
                            {% else %}
                            <li><a href="?page={{ i }}">{{ i }}</a></li>
                            {% endif %}
                        {% endfor %}
                        {% if comment_list.has_next %}
                        <li class="next"><a href="?page={{ comment_list.next_page_number }}" class="fa fa-arrow-right"></a></li>
                        {% else %}
                        <li class="previous disabled"><a href="#" class="fa fa-arrow-right"></a></li>
                        {% endif %}
                    </ul>
                </div>
          </div>
    {% endif %}

{% else %}
    <p style="padding: 0px 250px 0px">no hay comentarios</p>
{% endif %}
</div>


{% endblock %}
